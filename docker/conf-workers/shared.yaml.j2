# This file contains the base for the shared homeserver config file between Synapse workers,
# as part of ./Dockerfile-workers.
# configure_workers_and_start.py uses and amends to this file depending on the workers
# that have been selected.

{% if enable_redis %}
redis:
    enabled: true
    {% if using_unix_sockets %}
    path: /tmp/redis.sock
    {% endif %}
{% endif %}

{% if appservice_registrations is not none %}
## Application Services ##
# A list of application service config files to use.
app_service_config_files:
{%- for path in appservice_registrations %}
  - "{{ path }}"
{%- endfor %}
{%- endif %}

{% if enable_mas %}
experimental_features:
  msc3861:
    enabled: true
    issuer: "http://localhost:8008/"
    client_id: "0000000000000000000SYNAPSE"
    client_auth_method: client_secret_basic
    client_secret: choozia3ThiefahZaofeiveish1kahr0
    admin_token: eeShoo4ceebae4Lo4Che1hoofoophaiz
{% endif %}

{{ shared_worker_config }}
